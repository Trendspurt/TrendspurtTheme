!function(e){var n={};function t(c){if(n[c])return n[c].exports;var l=n[c]={i:c,l:!1,exports:{}};return e[c].call(l.exports,l,l.exports,t),l.l=!0,l.exports}t.m=e,t.c=n,t.d=function(e,n,c){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:c})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var c=Object.create(null);if(t.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var l in e)t.d(c,l,function(n){return e[n]}.bind(null,l));return c},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=13)}([,function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  SCENE_PLUGINS_READY: 'SCENE_PLUGINS_READY',\n  SCENE_PRE_READY: 'SCENE_PRE_READY',\n  SCENE_READY: 'SCENE_READY'\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9mdXNpb24vQ29uc3QuanM/YTE5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIFNDRU5FX1BMVUdJTlNfUkVBRFk6ICdTQ0VORV9QTFVHSU5TX1JFQURZJyxcbiAgU0NFTkVfUFJFX1JFQURZOiAnU0NFTkVfUFJFX1JFQURZJyxcbiAgU0NFTkVfUkVBRFk6ICdTQ0VORV9SRUFEWSdcbn07Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _default; });\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Nano Events\n * Taken from https://github.com/ai/nanoevents (MIT license)\n */\nvar _default =\n/*#__PURE__*/\nfunction () {\n  function _default() {\n    _classCallCheck(this, _default);\n\n    _defineProperty(this, "events", {});\n  }\n  /**\n   * Calls each of the listeners registered for a given event.\n   *\n   * @param {string} event The event name.\n   * @param {...*} arguments The arguments for listeners.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * ee.emit(\'tick\', tickType, tickDuration)\n   *\n   * @alias NanoEvents#emit\n   * @method\n   */\n\n\n  _createClass(_default, [{\n    key: "emit",\n    value: function emit(event) {\n      var args = [].slice.call(arguments, 1) // Array.prototype.call() returns empty array if context is not array-like\n      ;\n      [].slice.call(this.events[event] || []).filter(function (i) {\n        i.apply(null, args);\n      });\n    }\n    /**\n     * Add a listener for a given event.\n     *\n     * @param {string} event The event name.\n     * @param {function} cb The listener function.\n     *\n     * @return {function} Unbind listener from event.\n     *\n     * @example\n     * const unbind = ee.on(\'tick\', (tickType, tickDuration) => {\n     *   count += 1\n     * })\n     *\n     * disable () {\n     *   unbind()\n     * }\n     *\n     * @alias NanoEvents#on\n     * @method\n     */\n\n  }, {\n    key: "on",\n    value: function on(event, cb) {\n      if (false) {}\n\n      (this.events[event] = this.events[event] || []).push(cb);\n      return function () {\n        this.events[event] = this.events[event].filter(function (i) {\n          return i !== cb;\n        });\n      }.bind(this);\n    }\n    /**\n     * Removes all listeners.\n     *\n     * @returns {undefined}\n     *\n     * @example\n     * unbindAll(emitter)\n     */\n\n  }, {\n    key: "unbindAll",\n    value: function unbindAll() {\n      this.events = {};\n    }\n  }]);\n\n  return _default;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYnMvbmFub2V2ZW50cy5qcz9kYTNiIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuLyoqXG4gKiBOYW5vIEV2ZW50c1xuICogVGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vYWkvbmFub2V2ZW50cyAoTUlUIGxpY2Vuc2UpXG4gKi9cbnZhciBfZGVmYXVsdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIF9kZWZhdWx0KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJldmVudHNcIiwge30pO1xuICB9XG4gIC8qKlxuICAgKiBDYWxscyBlYWNoIG9mIHRoZSBsaXN0ZW5lcnMgcmVnaXN0ZXJlZCBmb3IgYSBnaXZlbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICAgKiBAcGFyYW0gey4uLip9IGFyZ3VtZW50cyBUaGUgYXJndW1lbnRzIGZvciBsaXN0ZW5lcnMuXG4gICAqXG4gICAqIEByZXR1cm4ge3VuZGVmaW5lZH1cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogZWUuZW1pdCgndGljaycsIHRpY2tUeXBlLCB0aWNrRHVyYXRpb24pXG4gICAqXG4gICAqIEBhbGlhcyBOYW5vRXZlbnRzI2VtaXRcbiAgICogQG1ldGhvZFxuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhfZGVmYXVsdCwgW3tcbiAgICBrZXk6IFwiZW1pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlbWl0KGV2ZW50KSB7XG4gICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSAvLyBBcnJheS5wcm90b3R5cGUuY2FsbCgpIHJldHVybnMgZW1wdHkgYXJyYXkgaWYgY29udGV4dCBpcyBub3QgYXJyYXktbGlrZVxuICAgICAgO1xuICAgICAgW10uc2xpY2UuY2FsbCh0aGlzLmV2ZW50c1tldmVudF0gfHwgW10pLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICBpLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZCBhIGxpc3RlbmVyIGZvciBhIGdpdmVuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50IFRoZSBldmVudCBuYW1lLlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIFRoZSBsaXN0ZW5lciBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2Z1bmN0aW9ufSBVbmJpbmQgbGlzdGVuZXIgZnJvbSBldmVudC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogY29uc3QgdW5iaW5kID0gZWUub24oJ3RpY2snLCAodGlja1R5cGUsIHRpY2tEdXJhdGlvbikgPT4ge1xuICAgICAqICAgY291bnQgKz0gMVxuICAgICAqIH0pXG4gICAgICpcbiAgICAgKiBkaXNhYmxlICgpIHtcbiAgICAgKiAgIHVuYmluZCgpXG4gICAgICogfVxuICAgICAqXG4gICAgICogQGFsaWFzIE5hbm9FdmVudHMjb25cbiAgICAgKiBAbWV0aG9kXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJvblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvbihldmVudCwgY2IpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpc3RlbmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICAgICAgfVxuXG4gICAgICAodGhpcy5ldmVudHNbZXZlbnRdID0gdGhpcy5ldmVudHNbZXZlbnRdIHx8IFtdKS5wdXNoKGNiKTtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IHRoaXMuZXZlbnRzW2V2ZW50XS5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICByZXR1cm4gaSAhPT0gY2I7XG4gICAgICAgIH0pO1xuICAgICAgfS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBsaXN0ZW5lcnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiB1bmJpbmRBbGwoZW1pdHRlcilcbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiBcInVuYmluZEFsbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB1bmJpbmRBbGwoKSB7XG4gICAgICB0aGlzLmV2ZW50cyA9IHt9O1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){eval("var content = __webpack_require__(4);\n\nif (typeof content === 'string') {\n  content = [[module.i, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = __webpack_require__(6)(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3N0eWxlL2Z1c2lvbi5zY3NzPzhiZWEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvZGlzdC9janMuanMhLi9mdXNpb24uc2Nzc1wiKTtcblxuaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xuICBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG59XG5cbnZhciBvcHRpb25zID0ge31cblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYgKGNvbnRlbnQubG9jYWxzKSB7XG4gIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n")},function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(5)(false);\n// Module\nexports.push([module.i, ".fusion--player{display:flex;justify-content:center}.fusion--player .fusion--viewport{position:relative;width:100%;height:100%}.fusion--player .fusion--viewport .fusion--scene{position:absolute;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:hidden;visibility:hidden;opacity:0}.fusion--player .fusion--viewport .fusion--scene.visible{visibility:visible;opacity:1}.fusion--player .fusion--viewport .fusion--scene.fusion--scene--iframe iframe.fusion--iframe{overflow:hidden;border:none}.fusion--player .fusion--viewport .fusion--scene .fusion--scene--content{position:absolute;top:0;right:0;bottom:0;left:0;transform-origin:top left;overflow:hidden}.fusion--player .fusion--viewport .fusion--scene .fusion--scene--content>*{position:absolute;width:100%;height:100%}.fusion--player .fusion--viewport .fusion--scene .fusion--scene--content>*>*{position:absolute;top:0;left:0}.fusion--player .fusion--viewport .fusion--scene--debugger--guidesWrapper{position:absolute;top:0;right:0;bottom:0;left:0;z-index:9999999;pointer-events:none}.fusion--player .fusion--viewport .fusion--scene--debugger--guidesWrapper .guide-horizontal-center{position:absolute;top:0;bottom:0;left:50%;width:1px;z-index:99999;border-left:1px dashed rgba(0,0,0,0.8)}.fusion--player .fusion--viewport .fusion--scene--debugger--guidesWrapper .guide-sceneBounds{position:absolute;top:0;right:0;bottom:0;left:0;transform-origin:top left;background-color:rgba(108,159,255,0.3)}\\n", ""]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3N0eWxlL2Z1c2lvbi5zY3NzPzk4MWQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuZnVzaW9uLS1wbGF5ZXJ7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXJ9LmZ1c2lvbi0tcGxheWVyIC5mdXNpb24tLXZpZXdwb3J0e3Bvc2l0aW9uOnJlbGF0aXZlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCV9LmZ1c2lvbi0tcGxheWVyIC5mdXNpb24tLXZpZXdwb3J0IC5mdXNpb24tLXNjZW5le3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93LXk6aGlkZGVuO3Zpc2liaWxpdHk6aGlkZGVuO29wYWNpdHk6MH0uZnVzaW9uLS1wbGF5ZXIgLmZ1c2lvbi0tdmlld3BvcnQgLmZ1c2lvbi0tc2NlbmUudmlzaWJsZXt2aXNpYmlsaXR5OnZpc2libGU7b3BhY2l0eToxfS5mdXNpb24tLXBsYXllciAuZnVzaW9uLS12aWV3cG9ydCAuZnVzaW9uLS1zY2VuZS5mdXNpb24tLXNjZW5lLS1pZnJhbWUgaWZyYW1lLmZ1c2lvbi0taWZyYW1le292ZXJmbG93OmhpZGRlbjtib3JkZXI6bm9uZX0uZnVzaW9uLS1wbGF5ZXIgLmZ1c2lvbi0tdmlld3BvcnQgLmZ1c2lvbi0tc2NlbmUgLmZ1c2lvbi0tc2NlbmUtLWNvbnRlbnR7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7dHJhbnNmb3JtLW9yaWdpbjp0b3AgbGVmdDtvdmVyZmxvdzpoaWRkZW59LmZ1c2lvbi0tcGxheWVyIC5mdXNpb24tLXZpZXdwb3J0IC5mdXNpb24tLXNjZW5lIC5mdXNpb24tLXNjZW5lLS1jb250ZW50Pip7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0uZnVzaW9uLS1wbGF5ZXIgLmZ1c2lvbi0tdmlld3BvcnQgLmZ1c2lvbi0tc2NlbmUgLmZ1c2lvbi0tc2NlbmUtLWNvbnRlbnQ+Kj4qe3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MH0uZnVzaW9uLS1wbGF5ZXIgLmZ1c2lvbi0tdmlld3BvcnQgLmZ1c2lvbi0tc2NlbmUtLWRlYnVnZ2VyLS1ndWlkZXNXcmFwcGVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3otaW5kZXg6OTk5OTk5OTtwb2ludGVyLWV2ZW50czpub25lfS5mdXNpb24tLXBsYXllciAuZnVzaW9uLS12aWV3cG9ydCAuZnVzaW9uLS1zY2VuZS0tZGVidWdnZXItLWd1aWRlc1dyYXBwZXIgLmd1aWRlLWhvcml6b250YWwtY2VudGVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2JvdHRvbTowO2xlZnQ6NTAlO3dpZHRoOjFweDt6LWluZGV4Ojk5OTk5O2JvcmRlci1sZWZ0OjFweCBkYXNoZWQgcmdiYSgwLDAsMCwwLjgpfS5mdXNpb24tLXBsYXllciAuZnVzaW9uLS12aWV3cG9ydCAuZnVzaW9uLS1zY2VuZS0tZGVidWdnZXItLWd1aWRlc1dyYXBwZXIgLmd1aWRlLXNjZW5lQm91bmRze3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7Ym90dG9tOjA7bGVmdDowO3RyYW5zZm9ybS1vcmlnaW46dG9wIGxlZnQ7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDEwOCwxNTksMjU1LDAuMyl9XFxuXCIsIFwiXCJdKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return "@media ".concat(item[2], "{").concat(content, "}");\n      }\n\n      return content;\n    }).join(\'\');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === \'string\') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \'\']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = "(".concat(item[2], ") and (").concat(mediaQuery, ")");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || \'\'; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === \'function\') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return "/*# sourceURL=".concat(cssMapping.sourceRoot).concat(source, " */");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\'\\n\');\n  }\n\n  return [content].join(\'\\n\');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(base64);\n  return "/*# ".concat(data, " */");\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanM/MjRmYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIntcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gbW9kdWxlc1tfaV07IC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcbiAgICAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG4gICAgICAvLyB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG4gICAgICAvLyBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cbiAgICAgIGlmIChpdGVtWzBdID09IG51bGwgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgaWYgKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiKFwiLmNvbmNhdChpdGVtWzJdLCBcIikgYW5kIChcIikuY29uY2F0KG1lZGlhUXVlcnksIFwiKVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290KS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce =  true ? __webpack_require__.nc : undefined;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcz8yZGJhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgc3R5bGVzSW5Eb20gPSB7fTtcblxudmFyIGlzT2xkSUUgPSBmdW5jdGlvbiBpc09sZElFKCkge1xuICB2YXIgbWVtbztcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKCkge1xuICAgIGlmICh0eXBlb2YgbWVtbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIFRlc3QgZm9yIElFIDw9IDkgYXMgcHJvcG9zZWQgYnkgQnJvd3NlcmhhY2tzXG4gICAgICAvLyBAc2VlIGh0dHA6Ly9icm93c2VyaGFja3MuY29tLyNoYWNrLWU3MWQ4NjkyZjY1MzM0MTczZmVlNzE1YzIyMmNiODA1XG4gICAgICAvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG4gICAgICAvLyB0byBvcGVyYXRlIGNvcnJlY3RseSBpbnRvIG5vbi1zdGFuZGFyZCBlbnZpcm9ubWVudHNcbiAgICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3dlYnBhY2stY29udHJpYi9zdHlsZS1sb2FkZXIvaXNzdWVzLzE3N1xuICAgICAgbWVtbyA9IEJvb2xlYW4od2luZG93ICYmIGRvY3VtZW50ICYmIGRvY3VtZW50LmFsbCAmJiAhd2luZG93LmF0b2IpO1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vO1xuICB9O1xufSgpO1xuXG52YXIgZ2V0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xuICB2YXIgbWVtbyA9IHt9O1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUodGFyZ2V0KSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IC8vIFNwZWNpYWwgY2FzZSB0byByZXR1cm4gaGVhZCBvZiBpZnJhbWUgaW5zdGVhZCBvZiBpZnJhbWUgaXRzZWxmXG5cbiAgICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuICAgICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgICAgc3R5bGVUYXJnZXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1lbW9bdGFyZ2V0XSA9IHN0eWxlVGFyZ2V0O1xuICAgIH1cblxuICAgIHJldHVybiBtZW1vW3RhcmdldF07XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZXMgPSBbXTtcbiAgdmFyIG5ld1N0eWxlcyA9IHt9O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY3NzID0gaXRlbVsxXTtcbiAgICB2YXIgbWVkaWEgPSBpdGVtWzJdO1xuICAgIHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuICAgIHZhciBwYXJ0ID0ge1xuICAgICAgY3NzOiBjc3MsXG4gICAgICBtZWRpYTogbWVkaWEsXG4gICAgICBzb3VyY2VNYXA6IHNvdXJjZU1hcFxuICAgIH07XG5cbiAgICBpZiAoIW5ld1N0eWxlc1tpZF0pIHtcbiAgICAgIHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgcGFydHM6IFtwYXJ0XVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICB2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcbiAgICB2YXIgaiA9IDA7XG5cbiAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgIGRvbVN0eWxlLnJlZnMrKztcblxuICAgICAgZm9yICg7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgICBkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcbiAgICAgIH1cblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgICAgZm9yICg7IGogPCBpdGVtLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuICAgICAgfVxuXG4gICAgICBzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtcbiAgICAgICAgaWQ6IGl0ZW0uaWQsXG4gICAgICAgIHJlZnM6IDEsXG4gICAgICAgIHBhcnRzOiBwYXJ0c1xuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBvcHRpb25zLmF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhvcHRpb25zLmF0dHJpYnV0ZXMpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZShrZXksIG9wdGlvbnMuYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmF0dHJpYnV0ZXMgPSB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGVzID09PSAnb2JqZWN0JyA/IG9wdGlvbnMuYXR0cmlidXRlcyA6IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCwgb3B0aW9ucyk7XG4gIGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuICAgIHZhciBtYXlSZW1vdmUgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IHN0eWxlc1tpXTtcbiAgICAgIHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXG4gICAgICBpZiAoZG9tU3R5bGUpIHtcbiAgICAgICAgZG9tU3R5bGUucmVmcy0tO1xuICAgICAgICBtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5ld0xpc3QpIHtcbiAgICAgIHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG4gICAgICBhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBtYXlSZW1vdmUubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2RvbVN0eWxlID0gbWF5UmVtb3ZlW19pXTtcblxuICAgICAgaWYgKF9kb21TdHlsZS5yZWZzID09PSAwKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX2RvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgX2RvbVN0eWxlLnBhcnRzW2pdKCk7XG4gICAgICAgIH1cblxuICAgICAgICBkZWxldGUgc3R5bGVzSW5Eb21bX2RvbVN0eWxlLmlkXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59OyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n")},function(module){eval('module.exports = JSON.parse("{\\"name\\":\\"mojo\\",\\"version\\":\\"0.9.0\\",\\"description\\":\\"\\",\\"private\\":true,\\"scripts\\":{\\"build\\":\\"npx webpack --mode production\\",\\"serve\\":\\"http-server -g -c-1\\"},\\"author\\":\\"Simon Widjaja\\",\\"devDependencies\\":{\\"@babel/cli\\":\\"^7.7.0\\",\\"@babel/core\\":\\"^7.7.2\\",\\"@babel/node\\":\\"^7.7.0\\",\\"@babel/plugin-proposal-class-properties\\":\\"^7.7.0\\",\\"@babel/preset-env\\":\\"^7.7.1\\",\\"@babel/register\\":\\"^7.7.0\\",\\"babel-register\\":\\"^6.26.0\\",\\"webpack\\":\\"^4.41.2\\",\\"webpack-cli\\":\\"^3.3.11\\",\\"webpack-dev-server\\":\\"^3.9.0\\"},\\"dependencies\\":{\\"@babel/plugin-transform-async-to-generator\\":\\"^7.7.0\\",\\"babel-loader\\":\\"^8.0.6\\",\\"core-js\\":\\"^3.4.0\\",\\"css-loader\\":\\"^3.2.0\\",\\"fs-extra\\":\\"^9.0.1\\",\\"lodash.debounce\\":\\"^4.0.8\\",\\"lodash.throttle\\":\\"^4.1.1\\",\\"node-sass\\":\\"^4.13.1\\",\\"regenerator-runtime\\":\\"^0.13.3\\",\\"sass-loader\\":\\"^8.0.0\\",\\"style-loader\\":\\"^1.0.0\\"}}");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n')},,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/fusion/Fusion.js\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar LOG = \'[ Fusion ]\';\nvar DEBUG = true;\n\nvar Fusion_default =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor\n   */\n  function _default() {\n    _classCallCheck(this, _default);\n\n    _defineProperty(this, "sceneDefinitions", {});\n  }\n\n  _createClass(_default, [{\n    key: "defineScene",\n    value: function defineScene(id, payload) {\n      DEBUG && console.log(LOG, \'defineScene()\', id);\n      this.sceneDefinitions[id] = payload;\n    }\n  }]);\n\n  return _default;\n}();\n\n\n// CONCATENATED MODULE: ./src/fusion/core/FusionHelper.js\nfunction FusionHelper_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction FusionHelper_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction FusionHelper_createClass(Constructor, protoProps, staticProps) { if (protoProps) FusionHelper_defineProperties(Constructor.prototype, protoProps); if (staticProps) FusionHelper_defineProperties(Constructor, staticProps); return Constructor; }\n\nvar FusionHelper =\n/*#__PURE__*/\nfunction () {\n  function FusionHelper() {\n    FusionHelper_classCallCheck(this, FusionHelper);\n  }\n\n  FusionHelper_createClass(FusionHelper, null, [{\n    key: "appendHtml",\n    value: function appendHtml(target, markup) {\n      target.insertAdjacentHTML(\'beforeend\', markup);\n      return target.lastChild;\n    } //---\n    // DEPRECATED !!!! (use mojo.helper.throttle etc.)\n    // https://github.com/m-gagne/limit.js\n    // (slightly modified)\n\n  }, {\n    key: "debounce",\n    value: function debounce(func, milliseconds, context) {\n      var baseFunction = func,\n          timer = null,\n          wait = milliseconds;\n      return function () {\n        var self = context || func,\n            args = arguments;\n\n        function complete() {\n          baseFunction.apply(self, args);\n          timer = null;\n        }\n\n        if (timer) {\n          clearTimeout(timer);\n        }\n\n        timer = setTimeout(complete, wait);\n      };\n    } //---\n    // DEPRECATED !!!! (use mojo.helper.throttle etc.)\n    // https://github.com/m-gagne/limit.js\n    // (slightly modified)\n\n  }, {\n    key: "throttle",\n    value: function throttle(func, milliseconds, context) {\n      var baseFunction = func,\n          lastEventTimestamp = null,\n          limit = milliseconds,\n          timeout,\n          lastCurrentTarget;\n      return function () {\n        var self = context || func,\n            args = arguments,\n            now = Date.now();\n\n        if (!lastEventTimestamp || now - lastEventTimestamp >= limit) {\n          lastEventTimestamp = now;\n          baseFunction.apply(self, args);\n\n          if (args[0] instanceof Event) {\n            lastCurrentTarget = args[0].currentTarget;\n          }\n        } else {\n          if (timeout) {\n            clearTimeout(timeout);\n            timeout = undefined;\n          }\n\n          if (args[0] instanceof Event) {\n            args[0].currentTarget_ = lastCurrentTarget;\n          }\n\n          timeout = setTimeout(function () {\n            baseFunction.apply(self, args);\n          }, milliseconds);\n        }\n      };\n    }\n    /*!\n     * Check if an element is inside the viewport\n     * #TODO Consider:\n     *   + caching\n     *   + partially in viewport\n     *   + not relative to window but to parent container\n     * #PERFORMANCE getBoundingClientRect() might become a performance bottleneck\n     *              see https://gist.github.com/paulirish/5d52fb081b3570c81e3a\n     *              and https://github.com/pelotoncycle/resize-observer/issues/5\n     * @param  {Node} el The element\n     * @return {Boolean} Returns true if element is in the viewport\n     */\n\n  }, {\n    key: "isInViewport",\n    value: function isInViewport(el) {\n      var distance = el.getBoundingClientRect();\n      return distance.top >= 0 && distance.left >= 0 && distance.bottom <= (window.innerHeight || document.documentElement.clientHeight) && distance.right <= (window.innerWidth || document.documentElement.clientWidth);\n    }\n  }]);\n\n  return FusionHelper;\n}();\n// EXTERNAL MODULE: ./src/fusion/Const.js\nvar Const = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneDebugger.js\nfunction SceneDebugger_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneDebugger_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneDebugger_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneDebugger_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneDebugger_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nvar SceneDebugger_LOG = \'[ SceneDebugger ]\';\n\nvar SceneDebugger_default =\n/*#__PURE__*/\nfunction () {\n  function _default(scene) {\n    var _this = this;\n\n    SceneDebugger_classCallCheck(this, _default);\n\n    this.scene = scene;\n    console.log(SceneDebugger_LOG, \'constructor()\', scene);\n    scene.on(Const["a" /* default */].SCENE_PRE_READY, function () {\n      _this.guidesWrapper = FusionHelper.appendHtml(scene.element.parentNode, "<div class=\\"fusion--scene--debugger--guidesWrapper\\"></div>");\n      ;\n      _this.guideHorizontalCenter = FusionHelper.appendHtml(_this.guidesWrapper, "<div class=\\"guide-horizontal-center\\"></div>");\n      ;\n      _this.guideSceneBounds = FusionHelper.appendHtml(_this.guidesWrapper, "<div class=\\"guide-sceneBounds\\"></div>");\n      ;\n    });\n    scene.on(Const["a" /* default */].SCENE_READY, function () {\n      setTimeout(function () {\n        _this.size();\n\n        if (scene.center != false && !scene.fit) {\n          window.addEventListener(\'resize\', FusionHelper.debounce(_this.center.bind(_this), 50));\n\n          _this.center();\n        }\n\n        if (scene.fit != false) {\n          window.addEventListener(\'resize\', FusionHelper.debounce(_this.fit.bind(_this), 50));\n\n          _this.fit();\n        }\n      }, 200);\n    });\n  }\n  /**\n   * Size\n   */\n\n\n  SceneDebugger_createClass(_default, [{\n    key: "size",\n    value: function size() {\n      this.guideSceneBounds.style.width = typeof this.scene.width == \'string\' ? this.scene.width : "".concat(this.scene.width, "px");\n      this.guideSceneBounds.style.height = typeof this.scene.height == \'string\' ? this.scene.height : "".concat(this.scene.height, "px");\n      this.scene.data.maxWidth && (this.guideSceneBounds.style.maxWidth = "".concat(this.scene.maxWidth, "px"));\n      this.scene.data.maxHeight && (this.guideSceneBounds.style.maxHeight = "".concat(this.scene.maxHeight, "px"));\n    }\n    /**\n     * Center guideSceneBounds\n     */\n\n  }, {\n    key: "center",\n    value: function center() {\n      this.guideSceneBounds.style.left = \'50%\';\n      this.guideSceneBounds.style.top = \'50%\';\n      this.guideSceneBounds.style.marginLeft = "-".concat(this.scene.width * this.scene.scale / 2, "px");\n      this.guideSceneBounds.style.marginTop = "-".concat(this.scene.height * this.scene.scale / 2, "px");\n    }\n    /**\n     * fit guideSceneBounds (responsive scaling)\n     */\n\n  }, {\n    key: "fit",\n    value: function fit() {\n      var availableWidth = this.scene.player.viewport.clientWidth;\n      var availableHeight = this.scene.player.viewport.clientHeight;\n      this.scene.scale = Math.min(availableWidth / this.scene.width, availableHeight / this.scene.height);\n      this.scene.scale = this.scene.scale > 1 ? 1 : this.scene.scale;\n      this.guideSceneBounds.style.transform = "scale(".concat(this.scene.scale, ")");\n      this.center();\n    }\n  }]);\n\n  return _default;\n}();\n\n\n// EXTERNAL MODULE: ./libs/nanoevents.js\nvar nanoevents = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/fusion/core/Scene.js\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction Scene_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction Scene_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction Scene_createClass(Constructor, protoProps, staticProps) { if (protoProps) Scene_defineProperties(Constructor.prototype, protoProps); if (staticProps) Scene_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar Scene_LOG = \'[ Scene ]\';\nvar Scene_DEBUG = true;\n\nvar Scene_default =\n/*#__PURE__*/\nfunction (_NanoEvents) {\n  _inherits(_default, _NanoEvents);\n\n  function _default(player, data) {\n    var _this;\n\n    Scene_classCallCheck(this, _default);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(_default).call(this));\n    _this.player = player;\n    _this.element;\n    _this.content;\n    _this.data = data;\n    _this.id = data.id;\n    _this.state = \'init\';\n    _this.width = data.width;\n    _this.height = data.height; // Debugger\n\n    if (_this.player.options.debug) {\n      _this["debugger"] = new SceneDebugger_default(_assertThisInitialized(_this));\n    } // Plugins\n\n\n    _this.initPlugins();\n\n    _this.emit(Const["a" /* default */].SCENE_PLUGINS_READY); // Preready\n\n\n    _this.on(Const["a" /* default */].SCENE_PRE_READY, function () {\n      _this.size();\n\n      if (_this.data.center != false && !_this.data.fit) {\n        window.addEventListener(\'resize\', FusionHelper.debounce(_this.center.bind(_assertThisInitialized(_this)), 50));\n\n        _this.center();\n      }\n\n      if (_this.data.fit != false) {\n        window.addEventListener(\'resize\', FusionHelper.debounce(_this.fit.bind(_assertThisInitialized(_this)), 50));\n\n        _this.fit();\n      } // Scan for mojo fx\n\n\n      mojo.fx.FxScanner.scan(_this.content);\n      Scene_DEBUG && console.log(Scene_LOG, _this.id, \': setting state to "ready"\');\n      _this.state = \'ready\';\n      Scene_DEBUG && console.log(Scene_LOG, _this.id, \': propagating SCENE_READY\');\n\n      _this.emit(Const["a" /* default */].SCENE_READY);\n    });\n\n    return _this;\n  }\n  /**\n   * Size\n   */\n\n\n  Scene_createClass(_default, [{\n    key: "size",\n    value: function size() {\n      this.content.style.width = typeof this.data.width == \'string\' ? this.data.width : "".concat(this.data.width, "px");\n      this.content.style.height = typeof this.data.height == \'string\' ? this.data.height : "".concat(this.data.height, "px");\n      this.data.maxWidth && (this.content.style.maxWidth = "".concat(this.data.maxWidth, "px"));\n      this.data.maxHeight && (this.content.style.maxHeight = "".concat(this.data.maxHeight, "px"));\n    }\n    /**\n     * Center content\n     */\n\n  }, {\n    key: "center",\n    value: function center() {\n      this.content.style.left = \'50%\';\n      this.content.style.top = \'50%\';\n      this.content.style.marginLeft = "-".concat(this.data.width * this.scale / 2, "px");\n      this.content.style.marginTop = "-".concat(this.data.height * this.scale / 2, "px");\n    }\n    /**\n     * fit content (responsive scaling)\n     */\n\n  }, {\n    key: "fit",\n    value: function fit() {\n      var availableWidth = this.player.viewport.clientWidth;\n      var availableHeight = this.player.viewport.clientHeight;\n      this.scale = Math.min(availableWidth / this.data.width, availableHeight / this.data.height);\n      this.scale = this.scale > 1 ? 1 : this.scale;\n      this.content.style.transform = "scale(".concat(this.scale, ")");\n      this.center();\n    }\n    /**\n     * Init plugins\n     */\n\n  }, {\n    key: "initPlugins",\n    value: function initPlugins() {\n      var _this2 = this;\n\n      // DEBUG && console.log(LOG, \'initPlugins(), plugins:\', this.data.plugins);\n      if (!this.data.plugins) return;\n      this.data.plugins.forEach(function (plugin) {\n        for (var key in mojo.plugins) {\n          if (plugin.id == mojo.plugins[key].manifest().id) {\n            new mojo.plugins[key](_this2, plugin.options);\n          }\n        }\n      });\n    }\n  }]);\n\n  return _default;\n}(nanoevents["a" /* default */]);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneDeferredBase.js\nfunction SceneDeferredBase_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SceneDeferredBase_typeof = function _typeof(obj) { return typeof obj; }; } else { SceneDeferredBase_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SceneDeferredBase_typeof(obj); }\n\nfunction SceneDeferredBase_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneDeferredBase_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneDeferredBase_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneDeferredBase_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneDeferredBase_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction SceneDeferredBase_possibleConstructorReturn(self, call) { if (call && (SceneDeferredBase_typeof(call) === "object" || typeof call === "function")) { return call; } return SceneDeferredBase_assertThisInitialized(self); }\n\nfunction SceneDeferredBase_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction SceneDeferredBase_getPrototypeOf(o) { SceneDeferredBase_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SceneDeferredBase_getPrototypeOf(o); }\n\nfunction SceneDeferredBase_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SceneDeferredBase_setPrototypeOf(subClass, superClass); }\n\nfunction SceneDeferredBase_setPrototypeOf(o, p) { SceneDeferredBase_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SceneDeferredBase_setPrototypeOf(o, p); }\n\n\n\n\nvar SceneDeferredBase_LOG = \'[ SceneMojo ]\';\nvar SceneDeferredBase_DEBUG = false;\n\nvar SceneDeferredBase_default =\n/*#__PURE__*/\nfunction (_Scene) {\n  SceneDeferredBase_inherits(_default, _Scene);\n\n  function _default(player, data) {\n    SceneDeferredBase_classCallCheck(this, _default);\n\n    return SceneDeferredBase_possibleConstructorReturn(this, SceneDeferredBase_getPrototypeOf(_default).call(this, player, data));\n  }\n\n  SceneDeferredBase_createClass(_default, [{\n    key: "render",\n    value: function render() {\n      // Create Markup\n      this.element = FusionHelper.appendHtml(this.player.viewport, "<div class=\\"fusion--scene fusion--scene--default scene-".concat(this.id, "\\"></div>"));\n      this.content = FusionHelper.appendHtml(this.element, "<div class=\\"fusion--scene--content\\"></div>");\n      FusionHelper.appendHtml(this.content, this.data.html); // Execute scene script\n\n      var scriptElement = document.createElement(\'script\'); // Wrap script to inject additional player/scene data\n\n      var script = "\\n      (function(scene) {\\n        var playerId = \'".concat(this.player.id, "\';\\n        var sceneId = \'").concat(this.id, "\';\\n        var player = window.fusionPlayer[playerId];\\n        var scene = player.getScene(sceneId);\\n\\n        ").concat(this.data.script, "\\n      })();\\n    ");\n      scriptElement.innerHTML = script;\n      this.element.appendChild(scriptElement); // Propagate preready\n\n      this.emit(Const["a" /* default */].SCENE_PRE_READY);\n    }\n  }]);\n\n  return _default;\n}(Scene_default);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneDefault.js\nfunction SceneDefault_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SceneDefault_typeof = function _typeof(obj) { return typeof obj; }; } else { SceneDefault_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SceneDefault_typeof(obj); }\n\nfunction SceneDefault_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneDefault_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneDefault_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneDefault_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneDefault_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction SceneDefault_possibleConstructorReturn(self, call) { if (call && (SceneDefault_typeof(call) === "object" || typeof call === "function")) { return call; } return SceneDefault_assertThisInitialized(self); }\n\nfunction SceneDefault_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction SceneDefault_getPrototypeOf(o) { SceneDefault_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SceneDefault_getPrototypeOf(o); }\n\nfunction SceneDefault_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SceneDefault_setPrototypeOf(subClass, superClass); }\n\nfunction SceneDefault_setPrototypeOf(o, p) { SceneDefault_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SceneDefault_setPrototypeOf(o, p); }\n\n\n\n\nvar SceneDefault_LOG = \'[ SceneDefault ]\';\nvar SceneDefault_DEBUG = false;\n\nvar SceneDefault_default =\n/*#__PURE__*/\nfunction (_SceneDeferredBase) {\n  SceneDefault_inherits(_default, _SceneDeferredBase);\n\n  function _default(player, data) {\n    SceneDefault_classCallCheck(this, _default);\n\n    return SceneDefault_possibleConstructorReturn(this, SceneDefault_getPrototypeOf(_default).call(this, player, data));\n  }\n\n  SceneDefault_createClass(_default, [{\n    key: "load",\n    value: function load() {\n      SceneDefault_DEBUG && console.log(SceneDefault_LOG, \'load()\');\n      this.loadManifest(this.render.bind(this));\n    }\n  }, {\n    key: "loadManifest",\n    value: function loadManifest(resolve) {\n      var _this = this;\n\n      SceneDefault_DEBUG && console.log(SceneDefault_LOG, \'loadManifest()\');\n      var queue = new createjs.LoadQueue(false);\n      queue.loadManifest(this.data.path + \'/manifest.json\', true, \'\');\n      queue.on("fileload", function (evt) {\n        SceneDefault_DEBUG && console.log(SceneDefault_LOG, \'fileload(), \', evt.item.id, evt);\n        _this.data[evt.item.id] = evt.result;\n      });\n      queue.on("complete", function (evt) {\n        SceneDefault_DEBUG && console.log(SceneDefault_LOG, \'loadManifest(), manifest complete...\', evt);\n        resolve();\n      });\n      queue.on("error", function (evt) {\n        console.warn(\'Error in loadManifest() during preloading. \' + evt.message);\n      });\n    }\n  }]);\n\n  return _default;\n}(SceneDeferredBase_default);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneFlat.js\nfunction SceneFlat_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SceneFlat_typeof = function _typeof(obj) { return typeof obj; }; } else { SceneFlat_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SceneFlat_typeof(obj); }\n\nfunction SceneFlat_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneFlat_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneFlat_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneFlat_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneFlat_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction SceneFlat_possibleConstructorReturn(self, call) { if (call && (SceneFlat_typeof(call) === "object" || typeof call === "function")) { return call; } return SceneFlat_assertThisInitialized(self); }\n\nfunction SceneFlat_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction SceneFlat_getPrototypeOf(o) { SceneFlat_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SceneFlat_getPrototypeOf(o); }\n\nfunction SceneFlat_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SceneFlat_setPrototypeOf(subClass, superClass); }\n\nfunction SceneFlat_setPrototypeOf(o, p) { SceneFlat_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SceneFlat_setPrototypeOf(o, p); }\n\n\n\nvar SceneFlat_LOG = \'[ SceneFlat ]\';\nvar SceneFlat_DEBUG = true;\n\nvar SceneFlat_default =\n/*#__PURE__*/\nfunction (_Scene) {\n  SceneFlat_inherits(_default, _Scene);\n\n  function _default(player, data) {\n    SceneFlat_classCallCheck(this, _default);\n\n    return SceneFlat_possibleConstructorReturn(this, SceneFlat_getPrototypeOf(_default).call(this, player, data));\n  }\n\n  SceneFlat_createClass(_default, [{\n    key: "load",\n    value: function load() {\n      SceneFlat_DEBUG && console.log(SceneFlat_LOG, \'load()\');\n      this.wire();\n      this.render();\n    }\n  }, {\n    key: "wire",\n    value: function wire() {\n      var sceneElement = this.player.wrapper.querySelector(".fusion--scene.scene-".concat(this.id));\n      this.element = sceneElement;\n      this.content = sceneElement.querySelector(\'.fusion--scene--content\');\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      SceneFlat_DEBUG && console.log(SceneFlat_LOG, this.id, \' : render()\'); // window[`___${this.id}`]();\n\n      var sceneDefinition = fusion.sceneDefinitions[this.id];\n      sceneDefinition && sceneDefinition.preReady && sceneDefinition.preReady.call(this, this, this.player);\n      sceneDefinition && sceneDefinition.ready && this.on(Const["a" /* default */].SCENE_READY, sceneDefinition.ready.bind(this, this, this.player)); // Propagate preready\n\n      this.emit(Const["a" /* default */].SCENE_PRE_READY);\n    }\n  }]);\n\n  return _default;\n}(Scene_default);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneEmbedded.js\nfunction SceneEmbedded_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SceneEmbedded_typeof = function _typeof(obj) { return typeof obj; }; } else { SceneEmbedded_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SceneEmbedded_typeof(obj); }\n\nfunction SceneEmbedded_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneEmbedded_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneEmbedded_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneEmbedded_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneEmbedded_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction SceneEmbedded_possibleConstructorReturn(self, call) { if (call && (SceneEmbedded_typeof(call) === "object" || typeof call === "function")) { return call; } return SceneEmbedded_assertThisInitialized(self); }\n\nfunction SceneEmbedded_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction SceneEmbedded_getPrototypeOf(o) { SceneEmbedded_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SceneEmbedded_getPrototypeOf(o); }\n\nfunction SceneEmbedded_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SceneEmbedded_setPrototypeOf(subClass, superClass); }\n\nfunction SceneEmbedded_setPrototypeOf(o, p) { SceneEmbedded_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SceneEmbedded_setPrototypeOf(o, p); }\n\n\nvar SceneEmbedded_LOG = \'[ SceneEmbedded ]\';\nvar SceneEmbedded_DEBUG = false;\n\nvar SceneEmbedded_default =\n/*#__PURE__*/\nfunction (_SceneDeferredBase) {\n  SceneEmbedded_inherits(_default, _SceneDeferredBase);\n\n  function _default(player, data) {\n    SceneEmbedded_classCallCheck(this, _default);\n\n    return SceneEmbedded_possibleConstructorReturn(this, SceneEmbedded_getPrototypeOf(_default).call(this, player, data));\n  }\n\n  SceneEmbedded_createClass(_default, [{\n    key: "load",\n    value: function load() {\n      SceneEmbedded_DEBUG && console.log(SceneEmbedded_LOG, \'load()\');\n      this.gatherData(this.render.bind(this));\n    }\n  }, {\n    key: "gatherData",\n    value: function gatherData(resolve) {\n      SceneEmbedded_DEBUG && console.log(SceneEmbedded_LOG, \'gatherData()\');\n      this.data.html = this.getMojoFragment("mojo--markup--".concat(this.id), \'text/mojo-markup\');\n      this.data.script = this.getMojoFragment("mojo--script--".concat(this.id), \'text/mojo-script\');\n      resolve();\n    }\n  }, {\n    key: "getMojoFragment",\n    value: function getMojoFragment(id, type) {\n      var scriptTag = document.querySelector("#".concat(id, "[type=\\"").concat(type, "\\"]"));\n      return scriptTag ? scriptTag.innerHTML : undefined;\n    }\n  }]);\n\n  return _default;\n}(SceneDeferredBase_default);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/SceneIframe.js\nfunction SceneIframe_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { SceneIframe_typeof = function _typeof(obj) { return typeof obj; }; } else { SceneIframe_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return SceneIframe_typeof(obj); }\n\nfunction SceneIframe_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction SceneIframe_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction SceneIframe_createClass(Constructor, protoProps, staticProps) { if (protoProps) SceneIframe_defineProperties(Constructor.prototype, protoProps); if (staticProps) SceneIframe_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction SceneIframe_possibleConstructorReturn(self, call) { if (call && (SceneIframe_typeof(call) === "object" || typeof call === "function")) { return call; } return SceneIframe_assertThisInitialized(self); }\n\nfunction SceneIframe_getPrototypeOf(o) { SceneIframe_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return SceneIframe_getPrototypeOf(o); }\n\nfunction SceneIframe_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction SceneIframe_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) SceneIframe_setPrototypeOf(subClass, superClass); }\n\nfunction SceneIframe_setPrototypeOf(o, p) { SceneIframe_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return SceneIframe_setPrototypeOf(o, p); }\n\nfunction SceneIframe_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar SceneIframe_LOG = \'[ SceneIframe ]\';\n\nvar SceneIframe_default =\n/*#__PURE__*/\nfunction (_Scene) {\n  SceneIframe_inherits(_default, _Scene);\n\n  function _default(player, data) {\n    var _this;\n\n    SceneIframe_classCallCheck(this, _default);\n\n    _this = SceneIframe_possibleConstructorReturn(this, SceneIframe_getPrototypeOf(_default).call(this, player, data));\n\n    SceneIframe_defineProperty(SceneIframe_assertThisInitialized(_this), "iframe", void 0);\n\n    return _this;\n  }\n\n  SceneIframe_createClass(_default, [{\n    key: "load",\n    value: function load() {\n      console.log(SceneIframe_LOG, \'load()\');\n      this.render();\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      // Create Markup\n      this.element = FusionHelper.appendHtml(this.viewport, "<div class=\\"fusion--scene fusion--scene--iframe scene-".concat(this.id, "\\"></div>"));\n      this.iframe = FusionHelper.appendHtml(this.element, "<iframe class=\\"fusion--iframe\\" src=\\"".concat(this.data.path, "\\" frameborder=\\"0\\" allowTransparency=\\"true\\"></iframe>"));\n      FusionHelper.appendHtml(this.element, this.data.html); // Iframe Size\n\n      this.iframe.style.width = \'100%\';\n      this.iframe.style.height = \'100%\'; // Propagate preready\n\n      this.emit(Const["a" /* default */].SCENE_PRE_READY);\n    }\n  }]);\n\n  return _default;\n}(Scene_default);\n\n\n// CONCATENATED MODULE: ./src/fusion/core/Player.js\nfunction Player_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction Player_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction Player_createClass(Constructor, protoProps, staticProps) { if (protoProps) Player_defineProperties(Constructor.prototype, protoProps); if (staticProps) Player_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction Player_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\nvar Player_LOG = \'[ FusionPlayer ]\';\nvar Player_DEBUG = true;\n/**\n * FusionPlayer Class\n */\n\nvar Player_default =\n/*#__PURE__*/\nfunction () {\n  function _default(options) {\n    var _this = this;\n\n    Player_classCallCheck(this, _default);\n\n    Player_defineProperty(this, "defaults", {\n      overflowX: \'hidden\',\n      overflowY: \'hidden\'\n    });\n\n    Player_defineProperty(this, "options", void 0);\n\n    Player_defineProperty(this, "wrapper", void 0);\n\n    Player_defineProperty(this, "viewport", void 0);\n\n    Player_defineProperty(this, "scenes", []);\n\n    Player_defineProperty(this, "currentScene", void 0);\n\n    Player_defineProperty(this, "lastScene", void 0);\n\n    window.fusionPlayer = window.fusionPlayer ? window.fusionPlayer : {};\n    window.fusionPlayer[options.id] = this;\n    this.options = Object.assign(this.defaults, options);\n    this.id = options.id;\n    this.wrapper = document.getElementById(options.id);\n    this.wrapper.classList.add(\'fusion--player\');\n    this.createMarkup();\n    this.viewport = this.wrapper.querySelector(\'.fusion--viewport\'); // Viewport is now always 100% of player\n    // this.viewport.style.width = (typeof this.options.width == \'string\') ? this.options.width : `${this.options.width}px`;\n    // this.viewport.style.height = (typeof this.options.height == \'string\') ? this.options.height : `${this.options.height}px`;\n\n    this.viewport.style.overflow = "auto"; // Create scene objects\n\n    this.options.scenes.forEach(function (scene) {\n      scene.width = scene.width || _this.options.width;\n      scene.height = scene.height || _this.options.height;\n\n      switch (scene.type) {\n        case \'flat\':\n          _this.scenes.push(new SceneFlat_default(_this, scene));\n\n          break;\n\n        case \'embedded\':\n          _this.scenes.push(new SceneEmbedded_default(_this, scene));\n\n          break;\n\n        case \'iframe\':\n          _this.scenes.push(new SceneIframe_default(_this, scene));\n\n          break;\n\n        default:\n          _this.scenes.push(new SceneDefault_default(_this, scene));\n\n      }\n    }); // this.loadScene(\'scene1\');\n  }\n\n  Player_createClass(_default, [{\n    key: "createMarkup",\n    value: function createMarkup() {\n      // With type \'flat\' we might have created the viewport manually\n      if (this.wrapper.querySelector(\'.fusion--viewport\')) return;\n      FusionHelper.appendHtml(this.wrapper, \'<div class="fusion--viewport"></div>\');\n    }\n  }, {\n    key: "getScene",\n    value: function getScene(id) {\n      return this.scenes.find(function (item) {\n        return item.id === id;\n      });\n    }\n  }, {\n    key: "loadScene",\n    value: function loadScene(id) {\n      var _this2 = this;\n\n      //   const scene = this.getScene(id);\n      //   if (!scene) {\n      //     console.error(LOG, \'Scene not found:\', id);\n      //     return;\n      //   }\n      //   scene.load();\n      // }\n      // /**\n      //  * Open scene\n      //  * Opens a scene and loads it first if needed\n      //  * @param {string} id Scene id \n      //  */\n      // openScene(id) {\n      Player_DEBUG && console.log(Player_LOG, \'openScene()\', "{".concat(id, "}"));\n      var scene = this.getScene(id);\n      Player_DEBUG && console.log(Player_LOG, \'openScene()\', "{".concat(id, "}"), "state: ".concat(scene.state)); // Bail\n\n      if (scene === this.currentScene) return; // Scene is loaded and ready\n\n      if (scene && scene.state === \'ready\') {\n        this.lastScene = this.currentScene;\n        this.currentScene = scene; // Fade out last scene\n\n        this.lastScene && setTimeout(function () {\n          _this2.lastScene.element.classList.remove(\'visible\');\n        }, 100); // Bring to front\n\n        scene.element.parentNode.appendChild(scene.element); // Fade in\n\n        setTimeout(function () {\n          _this2.currentScene.element.classList.add(\'visible\');\n        }, 1);\n      } // Scene is not ready yet\n      else if (scene) {\n          // scene.on(Const.SCENE_READY, this.openScene.bind(this, id));\n          scene.on(Const["a" /* default */].SCENE_READY, this.loadScene.bind(this, id)); // this.loadScene(id);\n\n          scene.load();\n        } // Scene not found\n        else {\n            console.error(Player_LOG, \'Scene not found:\', id);\n          }\n    }\n  }]);\n\n  return _default;\n}();\n\n\n// EXTERNAL MODULE: ./style/fusion.scss\nvar style_fusion = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/fusion.js\n\n\n\n\n\nvar version = __webpack_require__(7).version;\n\nconsole.log(\'[ Fusion ]\', \'VERSION\', version); // Global Fusion instance\n\nwindow.fusion = new Fusion_default(); // Use Fusion instance as namespace for all classes\n\nObject.assign(window.fusion, {\n  "const": Const["a" /* default */],\n  Player: Player_default\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZnVzaW9uL0Z1c2lvbi5qcz9jYzU0Iiwid2VicGFjazovLy8uL3NyYy9mdXNpb24vY29yZS9GdXNpb25IZWxwZXIuanM/YTYwMCIsIndlYnBhY2s6Ly8vLi9zcmMvZnVzaW9uL2NvcmUvU2NlbmVEZWJ1Z2dlci5qcz9hNDA4Iiwid2VicGFjazovLy8uL3NyYy9mdXNpb24vY29yZS9TY2VuZS5qcz9iMzIxIiwid2VicGFjazovLy8uL3NyYy9mdXNpb24vY29yZS9TY2VuZURlZmVycmVkQmFzZS5qcz9iYzU4Iiwid2VicGFjazovLy8uL3NyYy9mdXNpb24vY29yZS9TY2VuZURlZmF1bHQuanM/MWMxNyIsIndlYnBhY2s6Ly8vLi9zcmMvZnVzaW9uL2NvcmUvU2NlbmVGbGF0LmpzPzJjOTMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Z1c2lvbi9jb3JlL1NjZW5lRW1iZWRkZWQuanM/Njc4NyIsIndlYnBhY2s6Ly8vLi9zcmMvZnVzaW9uL2NvcmUvU2NlbmVJZnJhbWUuanM/MjY3MyIsIndlYnBhY2s6Ly8vLi9zcmMvZnVzaW9uL2NvcmUvUGxheWVyLmpzP2QzZTAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2Z1c2lvbi5qcz9iZDdmIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIExPRyA9ICdbIEZ1c2lvbiBdJztcbnZhciBERUJVRyA9IHRydWU7XG5cbnZhciBfZGVmYXVsdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RvclxuICAgKi9cbiAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjZW5lRGVmaW5pdGlvbnNcIiwge30pO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJkZWZpbmVTY2VuZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkZWZpbmVTY2VuZShpZCwgcGF5bG9hZCkge1xuICAgICAgREVCVUcgJiYgY29uc29sZS5sb2coTE9HLCAnZGVmaW5lU2NlbmUoKScsIGlkKTtcbiAgICAgIHRoaXMuc2NlbmVEZWZpbml0aW9uc1tpZF0gPSBwYXlsb2FkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZXhwb3J0IHZhciBGdXNpb25IZWxwZXIgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBGdXNpb25IZWxwZXIoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZ1c2lvbkhlbHBlcik7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoRnVzaW9uSGVscGVyLCBudWxsLCBbe1xuICAgIGtleTogXCJhcHBlbmRIdG1sXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGVuZEh0bWwodGFyZ2V0LCBtYXJrdXApIHtcbiAgICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIG1hcmt1cCk7XG4gICAgICByZXR1cm4gdGFyZ2V0Lmxhc3RDaGlsZDtcbiAgICB9IC8vLS0tXG4gICAgLy8gREVQUkVDQVRFRCAhISEhICh1c2UgbW9qby5oZWxwZXIudGhyb3R0bGUgZXRjLilcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbS1nYWduZS9saW1pdC5qc1xuICAgIC8vIChzbGlnaHRseSBtb2RpZmllZClcblxuICB9LCB7XG4gICAga2V5OiBcImRlYm91bmNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIG1pbGxpc2Vjb25kcywgY29udGV4dCkge1xuICAgICAgdmFyIGJhc2VGdW5jdGlvbiA9IGZ1bmMsXG4gICAgICAgICAgdGltZXIgPSBudWxsLFxuICAgICAgICAgIHdhaXQgPSBtaWxsaXNlY29uZHM7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IGNvbnRleHQgfHwgZnVuYyxcbiAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cbiAgICAgICAgZnVuY3Rpb24gY29tcGxldGUoKSB7XG4gICAgICAgICAgYmFzZUZ1bmN0aW9uLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoY29tcGxldGUsIHdhaXQpO1xuICAgICAgfTtcbiAgICB9IC8vLS0tXG4gICAgLy8gREVQUkVDQVRFRCAhISEhICh1c2UgbW9qby5oZWxwZXIudGhyb3R0bGUgZXRjLilcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbS1nYWduZS9saW1pdC5qc1xuICAgIC8vIChzbGlnaHRseSBtb2RpZmllZClcblxuICB9LCB7XG4gICAga2V5OiBcInRocm90dGxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIG1pbGxpc2Vjb25kcywgY29udGV4dCkge1xuICAgICAgdmFyIGJhc2VGdW5jdGlvbiA9IGZ1bmMsXG4gICAgICAgICAgbGFzdEV2ZW50VGltZXN0YW1wID0gbnVsbCxcbiAgICAgICAgICBsaW1pdCA9IG1pbGxpc2Vjb25kcyxcbiAgICAgICAgICB0aW1lb3V0LFxuICAgICAgICAgIGxhc3RDdXJyZW50VGFyZ2V0O1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSBjb250ZXh0IHx8IGZ1bmMsXG4gICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICAgICAgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgICAgICBpZiAoIWxhc3RFdmVudFRpbWVzdGFtcCB8fCBub3cgLSBsYXN0RXZlbnRUaW1lc3RhbXAgPj0gbGltaXQpIHtcbiAgICAgICAgICBsYXN0RXZlbnRUaW1lc3RhbXAgPSBub3c7XG4gICAgICAgICAgYmFzZUZ1bmN0aW9uLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXG4gICAgICAgICAgaWYgKGFyZ3NbMF0gaW5zdGFuY2VvZiBFdmVudCkge1xuICAgICAgICAgICAgbGFzdEN1cnJlbnRUYXJnZXQgPSBhcmdzWzBdLmN1cnJlbnRUYXJnZXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICB0aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhcmdzWzBdIGluc3RhbmNlb2YgRXZlbnQpIHtcbiAgICAgICAgICAgIGFyZ3NbMF0uY3VycmVudFRhcmdldF8gPSBsYXN0Q3VycmVudFRhcmdldDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBiYXNlRnVuY3Rpb24uYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgICAgICAgfSwgbWlsbGlzZWNvbmRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgLyohXG4gICAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBpbnNpZGUgdGhlIHZpZXdwb3J0XG4gICAgICogI1RPRE8gQ29uc2lkZXI6XG4gICAgICogICArIGNhY2hpbmdcbiAgICAgKiAgICsgcGFydGlhbGx5IGluIHZpZXdwb3J0XG4gICAgICogICArIG5vdCByZWxhdGl2ZSB0byB3aW5kb3cgYnV0IHRvIHBhcmVudCBjb250YWluZXJcbiAgICAgKiAjUEVSRk9STUFOQ0UgZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgbWlnaHQgYmVjb21lIGEgcGVyZm9ybWFuY2UgYm90dGxlbmVja1xuICAgICAqICAgICAgICAgICAgICBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzVkNTJmYjA4MWIzNTcwYzgxZTNhXG4gICAgICogICAgICAgICAgICAgIGFuZCBodHRwczovL2dpdGh1Yi5jb20vcGVsb3RvbmN5Y2xlL3Jlc2l6ZS1vYnNlcnZlci9pc3N1ZXMvNVxuICAgICAqIEBwYXJhbSAge05vZGV9IGVsIFRoZSBlbGVtZW50XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGVsZW1lbnQgaXMgaW4gdGhlIHZpZXdwb3J0XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJpc0luVmlld3BvcnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaXNJblZpZXdwb3J0KGVsKSB7XG4gICAgICB2YXIgZGlzdGFuY2UgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHJldHVybiBkaXN0YW5jZS50b3AgPj0gMCAmJiBkaXN0YW5jZS5sZWZ0ID49IDAgJiYgZGlzdGFuY2UuYm90dG9tIDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgJiYgZGlzdGFuY2UucmlnaHQgPD0gKHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIEZ1c2lvbkhlbHBlcjtcbn0oKTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCB7IEZ1c2lvbkhlbHBlciB9IGZyb20gJy4vRnVzaW9uSGVscGVyJztcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XG52YXIgTE9HID0gJ1sgU2NlbmVEZWJ1Z2dlciBdJztcblxudmFyIF9kZWZhdWx0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gX2RlZmF1bHQoc2NlbmUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTtcblxuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICBjb25zb2xlLmxvZyhMT0csICdjb25zdHJ1Y3RvcigpJywgc2NlbmUpO1xuICAgIHNjZW5lLm9uKENvbnN0LlNDRU5FX1BSRV9SRUFEWSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuZ3VpZGVzV3JhcHBlciA9IEZ1c2lvbkhlbHBlci5hcHBlbmRIdG1sKHNjZW5lLmVsZW1lbnQucGFyZW50Tm9kZSwgXCI8ZGl2IGNsYXNzPVxcXCJmdXNpb24tLXNjZW5lLS1kZWJ1Z2dlci0tZ3VpZGVzV3JhcHBlclxcXCI+PC9kaXY+XCIpO1xuICAgICAgO1xuICAgICAgX3RoaXMuZ3VpZGVIb3Jpem9udGFsQ2VudGVyID0gRnVzaW9uSGVscGVyLmFwcGVuZEh0bWwoX3RoaXMuZ3VpZGVzV3JhcHBlciwgXCI8ZGl2IGNsYXNzPVxcXCJndWlkZS1ob3Jpem9udGFsLWNlbnRlclxcXCI+PC9kaXY+XCIpO1xuICAgICAgO1xuICAgICAgX3RoaXMuZ3VpZGVTY2VuZUJvdW5kcyA9IEZ1c2lvbkhlbHBlci5hcHBlbmRIdG1sKF90aGlzLmd1aWRlc1dyYXBwZXIsIFwiPGRpdiBjbGFzcz1cXFwiZ3VpZGUtc2NlbmVCb3VuZHNcXFwiPjwvZGl2PlwiKTtcbiAgICAgIDtcbiAgICB9KTtcbiAgICBzY2VuZS5vbihDb25zdC5TQ0VORV9SRUFEWSwgZnVuY3Rpb24gKCkge1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLnNpemUoKTtcblxuICAgICAgICBpZiAoc2NlbmUuY2VudGVyICE9IGZhbHNlICYmICFzY2VuZS5maXQpIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgRnVzaW9uSGVscGVyLmRlYm91bmNlKF90aGlzLmNlbnRlci5iaW5kKF90aGlzKSwgNTApKTtcblxuICAgICAgICAgIF90aGlzLmNlbnRlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNjZW5lLmZpdCAhPSBmYWxzZSkge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBGdXNpb25IZWxwZXIuZGVib3VuY2UoX3RoaXMuZml0LmJpbmQoX3RoaXMpLCA1MCkpO1xuXG4gICAgICAgICAgX3RoaXMuZml0KCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIFNpemVcbiAgICovXG5cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcInNpemVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2l6ZSgpIHtcbiAgICAgIHRoaXMuZ3VpZGVTY2VuZUJvdW5kcy5zdHlsZS53aWR0aCA9IHR5cGVvZiB0aGlzLnNjZW5lLndpZHRoID09ICdzdHJpbmcnID8gdGhpcy5zY2VuZS53aWR0aCA6IFwiXCIuY29uY2F0KHRoaXMuc2NlbmUud2lkdGgsIFwicHhcIik7XG4gICAgICB0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUuaGVpZ2h0ID0gdHlwZW9mIHRoaXMuc2NlbmUuaGVpZ2h0ID09ICdzdHJpbmcnID8gdGhpcy5zY2VuZS5oZWlnaHQgOiBcIlwiLmNvbmNhdCh0aGlzLnNjZW5lLmhlaWdodCwgXCJweFwiKTtcbiAgICAgIHRoaXMuc2NlbmUuZGF0YS5tYXhXaWR0aCAmJiAodGhpcy5ndWlkZVNjZW5lQm91bmRzLnN0eWxlLm1heFdpZHRoID0gXCJcIi5jb25jYXQodGhpcy5zY2VuZS5tYXhXaWR0aCwgXCJweFwiKSk7XG4gICAgICB0aGlzLnNjZW5lLmRhdGEubWF4SGVpZ2h0ICYmICh0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUubWF4SGVpZ2h0ID0gXCJcIi5jb25jYXQodGhpcy5zY2VuZS5tYXhIZWlnaHQsIFwicHhcIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDZW50ZXIgZ3VpZGVTY2VuZUJvdW5kc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiY2VudGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNlbnRlcigpIHtcbiAgICAgIHRoaXMuZ3VpZGVTY2VuZUJvdW5kcy5zdHlsZS5sZWZ0ID0gJzUwJSc7XG4gICAgICB0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUudG9wID0gJzUwJSc7XG4gICAgICB0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUubWFyZ2luTGVmdCA9IFwiLVwiLmNvbmNhdCh0aGlzLnNjZW5lLndpZHRoICogdGhpcy5zY2VuZS5zY2FsZSAvIDIsIFwicHhcIik7XG4gICAgICB0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUubWFyZ2luVG9wID0gXCItXCIuY29uY2F0KHRoaXMuc2NlbmUuaGVpZ2h0ICogdGhpcy5zY2VuZS5zY2FsZSAvIDIsIFwicHhcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGZpdCBndWlkZVNjZW5lQm91bmRzIChyZXNwb25zaXZlIHNjYWxpbmcpXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJmaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZml0KCkge1xuICAgICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zY2VuZS5wbGF5ZXIudmlld3BvcnQuY2xpZW50V2lkdGg7XG4gICAgICB2YXIgYXZhaWxhYmxlSGVpZ2h0ID0gdGhpcy5zY2VuZS5wbGF5ZXIudmlld3BvcnQuY2xpZW50SGVpZ2h0O1xuICAgICAgdGhpcy5zY2VuZS5zY2FsZSA9IE1hdGgubWluKGF2YWlsYWJsZVdpZHRoIC8gdGhpcy5zY2VuZS53aWR0aCwgYXZhaWxhYmxlSGVpZ2h0IC8gdGhpcy5zY2VuZS5oZWlnaHQpO1xuICAgICAgdGhpcy5zY2VuZS5zY2FsZSA9IHRoaXMuc2NlbmUuc2NhbGUgPiAxID8gMSA6IHRoaXMuc2NlbmUuc2NhbGU7XG4gICAgICB0aGlzLmd1aWRlU2NlbmVCb3VuZHMuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZShcIi5jb25jYXQodGhpcy5zY2VuZS5zY2FsZSwgXCIpXCIpO1xuICAgICAgdGhpcy5jZW50ZXIoKTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gX2RlZmF1bHQ7XG59KCk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IHsgRnVzaW9uSGVscGVyIH0gZnJvbSAnLi9GdXNpb25IZWxwZXInO1xuaW1wb3J0IFNjZW5lRGVidWdnZXIgZnJvbSAnLi9TY2VuZURlYnVnZ2VyJztcbmltcG9ydCBOYW5vRXZlbnRzIGZyb20gJy4uLy4uLy4uL2xpYnMvbmFub2V2ZW50cyc7XG5pbXBvcnQgQ29uc3QgZnJvbSAnLi4vQ29uc3QnO1xudmFyIExPRyA9ICdbIFNjZW5lIF0nO1xudmFyIERFQlVHID0gdHJ1ZTtcblxudmFyIF9kZWZhdWx0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfTmFub0V2ZW50cykge1xuICBfaW5oZXJpdHMoX2RlZmF1bHQsIF9OYW5vRXZlbnRzKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChwbGF5ZXIsIGRhdGEpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpO1xuXG4gICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoX2RlZmF1bHQpLmNhbGwodGhpcykpO1xuICAgIF90aGlzLnBsYXllciA9IHBsYXllcjtcbiAgICBfdGhpcy5lbGVtZW50O1xuICAgIF90aGlzLmNvbnRlbnQ7XG4gICAgX3RoaXMuZGF0YSA9IGRhdGE7XG4gICAgX3RoaXMuaWQgPSBkYXRhLmlkO1xuICAgIF90aGlzLnN0YXRlID0gJ2luaXQnO1xuICAgIF90aGlzLndpZHRoID0gZGF0YS53aWR0aDtcbiAgICBfdGhpcy5oZWlnaHQgPSBkYXRhLmhlaWdodDsgLy8gRGVidWdnZXJcblxuICAgIGlmIChfdGhpcy5wbGF5ZXIub3B0aW9ucy5kZWJ1Zykge1xuICAgICAgX3RoaXNbXCJkZWJ1Z2dlclwiXSA9IG5ldyBTY2VuZURlYnVnZ2VyKF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpKTtcbiAgICB9IC8vIFBsdWdpbnNcblxuXG4gICAgX3RoaXMuaW5pdFBsdWdpbnMoKTtcblxuICAgIF90aGlzLmVtaXQoQ29uc3QuU0NFTkVfUExVR0lOU19SRUFEWSk7IC8vIFByZXJlYWR5XG5cblxuICAgIF90aGlzLm9uKENvbnN0LlNDRU5FX1BSRV9SRUFEWSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMuc2l6ZSgpO1xuXG4gICAgICBpZiAoX3RoaXMuZGF0YS5jZW50ZXIgIT0gZmFsc2UgJiYgIV90aGlzLmRhdGEuZml0KSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBGdXNpb25IZWxwZXIuZGVib3VuY2UoX3RoaXMuY2VudGVyLmJpbmQoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcykpLCA1MCkpO1xuXG4gICAgICAgIF90aGlzLmNlbnRlcigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoX3RoaXMuZGF0YS5maXQgIT0gZmFsc2UpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIEZ1c2lvbkhlbHBlci5kZWJvdW5jZShfdGhpcy5maXQuYmluZChfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSksIDUwKSk7XG5cbiAgICAgICAgX3RoaXMuZml0KCk7XG4gICAgICB9IC8vIFNjYW4gZm9yIG1vam8gZnhcblxuXG4gICAgICBtb2pvLmZ4LkZ4U2Nhbm5lci5zY2FuKF90aGlzLmNvbnRlbnQpO1xuICAgICAgREVCVUcgJiYgY29uc29sZS5sb2coTE9HLCBfdGhpcy5pZCwgJzogc2V0dGluZyBzdGF0ZSB0byBcInJlYWR5XCInKTtcbiAgICAgIF90aGlzLnN0YXRlID0gJ3JlYWR5JztcbiAgICAgIERFQlVHICYmIGNvbnNvbGUubG9nKExPRywgX3RoaXMuaWQsICc6IHByb3BhZ2F0aW5nIFNDRU5FX1JFQURZJyk7XG5cbiAgICAgIF90aGlzLmVtaXQoQ29uc3QuU0NFTkVfUkVBRFkpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTaXplXG4gICAqL1xuXG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJzaXplXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHNpemUoKSB7XG4gICAgICB0aGlzLmNvbnRlbnQuc3R5bGUud2lkdGggPSB0eXBlb2YgdGhpcy5kYXRhLndpZHRoID09ICdzdHJpbmcnID8gdGhpcy5kYXRhLndpZHRoIDogXCJcIi5jb25jYXQodGhpcy5kYXRhLndpZHRoLCBcInB4XCIpO1xuICAgICAgdGhpcy5jb250ZW50LnN0eWxlLmhlaWdodCA9IHR5cGVvZiB0aGlzLmRhdGEuaGVpZ2h0ID09ICdzdHJpbmcnID8gdGhpcy5kYXRhLmhlaWdodCA6IFwiXCIuY29uY2F0KHRoaXMuZGF0YS5oZWlnaHQsIFwicHhcIik7XG4gICAgICB0aGlzLmRhdGEubWF4V2lkdGggJiYgKHRoaXMuY29udGVudC5zdHlsZS5tYXhXaWR0aCA9IFwiXCIuY29uY2F0KHRoaXMuZGF0YS5tYXhXaWR0aCwgXCJweFwiKSk7XG4gICAgICB0aGlzLmRhdGEubWF4SGVpZ2h0ICYmICh0aGlzLmNvbnRlbnQuc3R5bGUubWF4SGVpZ2h0ID0gXCJcIi5jb25jYXQodGhpcy5kYXRhLm1heEhlaWdodCwgXCJweFwiKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENlbnRlciBjb250ZW50XG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJjZW50ZXJcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gY2VudGVyKCkge1xuICAgICAgdGhpcy5jb250ZW50LnN0eWxlLmxlZnQgPSAnNTAlJztcbiAgICAgIHRoaXMuY29udGVudC5zdHlsZS50b3AgPSAnNTAlJztcbiAgICAgIHRoaXMuY29udGVudC5zdHlsZS5tYXJnaW5MZWZ0ID0gXCItXCIuY29uY2F0KHRoaXMuZGF0YS53aWR0aCAqIHRoaXMuc2NhbGUgLyAyLCBcInB4XCIpO1xuICAgICAgdGhpcy5jb250ZW50LnN0eWxlLm1hcmdpblRvcCA9IFwiLVwiLmNvbmNhdCh0aGlzLmRhdGEuaGVpZ2h0ICogdGhpcy5zY2FsZSAvIDIsIFwicHhcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIGZpdCBjb250ZW50IChyZXNwb25zaXZlIHNjYWxpbmcpXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogXCJmaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZml0KCkge1xuICAgICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gdGhpcy5wbGF5ZXIudmlld3BvcnQuY2xpZW50V2lkdGg7XG4gICAgICB2YXIgYXZhaWxhYmxlSGVpZ2h0ID0gdGhpcy5wbGF5ZXIudmlld3BvcnQuY2xpZW50SGVpZ2h0O1xuICAgICAgdGhpcy5zY2FsZSA9IE1hdGgubWluKGF2YWlsYWJsZVdpZHRoIC8gdGhpcy5kYXRhLndpZHRoLCBhdmFpbGFibGVIZWlnaHQgLyB0aGlzLmRhdGEuaGVpZ2h0KTtcbiAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLnNjYWxlID4gMSA/IDEgOiB0aGlzLnNjYWxlO1xuICAgICAgdGhpcy5jb250ZW50LnN0eWxlLnRyYW5zZm9ybSA9IFwic2NhbGUoXCIuY29uY2F0KHRoaXMuc2NhbGUsIFwiKVwiKTtcbiAgICAgIHRoaXMuY2VudGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluaXQgcGx1Z2luc1xuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6IFwiaW5pdFBsdWdpbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdFBsdWdpbnMoKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgLy8gREVCVUcgJiYgY29uc29sZS5sb2coTE9HLCAnaW5pdFBsdWdpbnMoKSwgcGx1Z2luczonLCB0aGlzLmRhdGEucGx1Z2lucyk7XG4gICAgICBpZiAoIXRoaXMuZGF0YS5wbHVnaW5zKSByZXR1cm47XG4gICAgICB0aGlzLmRhdGEucGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG1vam8ucGx1Z2lucykge1xuICAgICAgICAgIGlmIChwbHVnaW4uaWQgPT0gbW9qby5wbHVnaW5zW2tleV0ubWFuaWZlc3QoKS5pZCkge1xuICAgICAgICAgICAgbmV3IG1vam8ucGx1Z2luc1trZXldKF90aGlzMiwgcGx1Z2luLm9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShOYW5vRXZlbnRzKTtcblxuZXhwb3J0IHsgX2RlZmF1bHQgYXMgZGVmYXVsdCB9OyIsImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb25cIik7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgX3NldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKTsgfVxuXG5mdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBfc2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgby5fX3Byb3RvX18gPSBwOyByZXR1cm4gbzsgfTsgcmV0dXJuIF9zZXRQcm90b3R5cGVPZihvLCBwKTsgfVxuXG5pbXBvcnQgU2NlbmUgZnJvbSAnLi9TY2VuZSc7XG5pbXBvcnQgeyBGdXNpb25IZWxwZXIgfSBmcm9tICcuL0Z1c2lvbkhlbHBlcic7XG5pbXBvcnQgQ29uc3QgZnJvbSAnLi4vQ29uc3QnO1xudmFyIExPRyA9ICdbIFNjZW5lTW9qbyBdJztcbnZhciBERUJVRyA9IGZhbHNlO1xuXG52YXIgX2RlZmF1bHQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKF9TY2VuZSkge1xuICBfaW5oZXJpdHMoX2RlZmF1bHQsIF9TY2VuZSk7XG5cbiAgZnVuY3Rpb24gX2RlZmF1bHQocGxheWVyLCBkYXRhKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTtcblxuICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoX2RlZmF1bHQpLmNhbGwodGhpcywgcGxheWVyLCBkYXRhKSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcInJlbmRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAvLyBDcmVhdGUgTWFya3VwXG4gICAgICB0aGlzLmVsZW1lbnQgPSBGdXNpb25IZWxwZXIuYXBwZW5kSHRtbCh0aGlzLnBsYXllci52aWV3cG9ydCwgXCI8ZGl2IGNsYXNzPVxcXCJmdXNpb24tLXNjZW5lIGZ1c2lvbi0tc2NlbmUtLWRlZmF1bHQgc2NlbmUtXCIuY29uY2F0KHRoaXMuaWQsIFwiXFxcIj48L2Rpdj5cIikpO1xuICAgICAgdGhpcy5jb250ZW50ID0gRnVzaW9uSGVscGVyLmFwcGVuZEh0bWwodGhpcy5lbGVtZW50LCBcIjxkaXYgY2xhc3M9XFxcImZ1c2lvbi0tc2NlbmUtLWNvbnRlbnRcXFwiPjwvZGl2PlwiKTtcbiAgICAgIEZ1c2lvbkhlbHBlci5hcHBlbmRIdG1sKHRoaXMuY29udGVudCwgdGhpcy5kYXRhLmh0bWwpOyAvLyBFeGVjdXRlIHNjZW5lIHNjcmlwdFxuXG4gICAgICB2YXIgc2NyaXB0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyAvLyBXcmFwIHNjcmlwdCB0byBpbmplY3QgYWRkaXRpb25hbCBwbGF5ZXIvc2NlbmUgZGF0YVxuXG4gICAgICB2YXIgc2NyaXB0ID0gXCJcXG4gICAgICAoZnVuY3Rpb24oc2NlbmUpIHtcXG4gICAgICAgIHZhciBwbGF5ZXJJZCA9ICdcIi5jb25jYXQodGhpcy5wbGF5ZXIuaWQsIFwiJztcXG4gICAgICAgIHZhciBzY2VuZUlkID0gJ1wiKS5jb25jYXQodGhpcy5pZCwgXCInO1xcbiAgICAgICAgdmFyIHBsYXllciA9IHdpbmRvdy5mdXNpb25QbGF5ZXJbcGxheWVySWRdO1xcbiAgICAgICAgdmFyIHNjZW5lID0gcGxheWVyLmdldFNjZW5lKHNjZW5lSWQpO1xcblxcbiAgICAgICAgXCIpLmNvbmNhdCh0aGlzLmRhdGEuc2NyaXB0LCBcIlxcbiAgICAgIH0pKCk7XFxuICAgIFwiKTtcbiAgICAgIHNjcmlwdEVsZW1lbnQuaW5uZXJIVE1MID0gc2NyaXB0O1xuICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdEVsZW1lbnQpOyAvLyBQcm9wYWdhdGUgcHJlcmVhZHlcblxuICAgICAgdGhpcy5lbWl0KENvbnN0LlNDRU5FX1BSRV9SRUFEWSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShTY2VuZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IFNjZW5lRGVmZXJyZWRCYXNlIGZyb20gJy4vU2NlbmVEZWZlcnJlZEJhc2UnO1xuaW1wb3J0IHsgRnVzaW9uSGVscGVyIH0gZnJvbSAnLi9GdXNpb25IZWxwZXInO1xuaW1wb3J0IENvbnN0IGZyb20gJy4uL0NvbnN0JztcbnZhciBMT0cgPSAnWyBTY2VuZURlZmF1bHQgXSc7XG52YXIgREVCVUcgPSBmYWxzZTtcblxudmFyIF9kZWZhdWx0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfU2NlbmVEZWZlcnJlZEJhc2UpIHtcbiAgX2luaGVyaXRzKF9kZWZhdWx0LCBfU2NlbmVEZWZlcnJlZEJhc2UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KHBsYXllciwgZGF0YSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKF9kZWZhdWx0KS5jYWxsKHRoaXMsIHBsYXllciwgZGF0YSkpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmxvZyhMT0csICdsb2FkKCknKTtcbiAgICAgIHRoaXMubG9hZE1hbmlmZXN0KHRoaXMucmVuZGVyLmJpbmQodGhpcykpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsb2FkTWFuaWZlc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZE1hbmlmZXN0KHJlc29sdmUpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIERFQlVHICYmIGNvbnNvbGUubG9nKExPRywgJ2xvYWRNYW5pZmVzdCgpJyk7XG4gICAgICB2YXIgcXVldWUgPSBuZXcgY3JlYXRlanMuTG9hZFF1ZXVlKGZhbHNlKTtcbiAgICAgIHF1ZXVlLmxvYWRNYW5pZmVzdCh0aGlzLmRhdGEucGF0aCArICcvbWFuaWZlc3QuanNvbicsIHRydWUsICcnKTtcbiAgICAgIHF1ZXVlLm9uKFwiZmlsZWxvYWRcIiwgZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICBERUJVRyAmJiBjb25zb2xlLmxvZyhMT0csICdmaWxlbG9hZCgpLCAnLCBldnQuaXRlbS5pZCwgZXZ0KTtcbiAgICAgICAgX3RoaXMuZGF0YVtldnQuaXRlbS5pZF0gPSBldnQucmVzdWx0O1xuICAgICAgfSk7XG4gICAgICBxdWV1ZS5vbihcImNvbXBsZXRlXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgREVCVUcgJiYgY29uc29sZS5sb2coTE9HLCAnbG9hZE1hbmlmZXN0KCksIG1hbmlmZXN0IGNvbXBsZXRlLi4uJywgZXZ0KTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG4gICAgICBxdWV1ZS5vbihcImVycm9yXCIsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBpbiBsb2FkTWFuaWZlc3QoKSBkdXJpbmcgcHJlbG9hZGluZy4gJyArIGV2dC5tZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oU2NlbmVEZWZlcnJlZEJhc2UpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZikgeyBpZiAoc2VsZiA9PT0gdm9pZCAwKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gc2VsZjsgfVxuXG5mdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyBfZ2V0UHJvdG90eXBlT2YgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3QuZ2V0UHJvdG90eXBlT2YgOiBmdW5jdGlvbiBfZ2V0UHJvdG90eXBlT2YobykgeyByZXR1cm4gby5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKG8pOyB9OyByZXR1cm4gX2dldFByb3RvdHlwZU9mKG8pOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmltcG9ydCBTY2VuZSBmcm9tICcuL1NjZW5lJztcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XG52YXIgTE9HID0gJ1sgU2NlbmVGbGF0IF0nO1xudmFyIERFQlVHID0gdHJ1ZTtcblxudmFyIF9kZWZhdWx0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfU2NlbmUpIHtcbiAgX2luaGVyaXRzKF9kZWZhdWx0LCBfU2NlbmUpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KHBsYXllciwgZGF0YSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKF9kZWZhdWx0KS5jYWxsKHRoaXMsIHBsYXllciwgZGF0YSkpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmxvZyhMT0csICdsb2FkKCknKTtcbiAgICAgIHRoaXMud2lyZSgpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwid2lyZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiB3aXJlKCkge1xuICAgICAgdmFyIHNjZW5lRWxlbWVudCA9IHRoaXMucGxheWVyLndyYXBwZXIucXVlcnlTZWxlY3RvcihcIi5mdXNpb24tLXNjZW5lLnNjZW5lLVwiLmNvbmNhdCh0aGlzLmlkKSk7XG4gICAgICB0aGlzLmVsZW1lbnQgPSBzY2VuZUVsZW1lbnQ7XG4gICAgICB0aGlzLmNvbnRlbnQgPSBzY2VuZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZ1c2lvbi0tc2NlbmUtLWNvbnRlbnQnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIERFQlVHICYmIGNvbnNvbGUubG9nKExPRywgdGhpcy5pZCwgJyA6IHJlbmRlcigpJyk7IC8vIHdpbmRvd1tgX19fJHt0aGlzLmlkfWBdKCk7XG5cbiAgICAgIHZhciBzY2VuZURlZmluaXRpb24gPSBmdXNpb24uc2NlbmVEZWZpbml0aW9uc1t0aGlzLmlkXTtcbiAgICAgIHNjZW5lRGVmaW5pdGlvbiAmJiBzY2VuZURlZmluaXRpb24ucHJlUmVhZHkgJiYgc2NlbmVEZWZpbml0aW9uLnByZVJlYWR5LmNhbGwodGhpcywgdGhpcywgdGhpcy5wbGF5ZXIpO1xuICAgICAgc2NlbmVEZWZpbml0aW9uICYmIHNjZW5lRGVmaW5pdGlvbi5yZWFkeSAmJiB0aGlzLm9uKENvbnN0LlNDRU5FX1JFQURZLCBzY2VuZURlZmluaXRpb24ucmVhZHkuYmluZCh0aGlzLCB0aGlzLCB0aGlzLnBsYXllcikpOyAvLyBQcm9wYWdhdGUgcHJlcmVhZHlcblxuICAgICAgdGhpcy5lbWl0KENvbnN0LlNDRU5FX1BSRV9SRUFEWSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShTY2VuZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07IH0gcmV0dXJuIF90eXBlb2Yob2JqKTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKGNhbGwgJiYgKF90eXBlb2YoY2FsbCkgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikpIHsgcmV0dXJuIGNhbGw7IH0gcmV0dXJuIF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoc2VsZik7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuaW1wb3J0IFNjZW5lRGVmZXJyZWRCYXNlIGZyb20gJy4vU2NlbmVEZWZlcnJlZEJhc2UnO1xudmFyIExPRyA9ICdbIFNjZW5lRW1iZWRkZWQgXSc7XG52YXIgREVCVUcgPSBmYWxzZTtcblxudmFyIF9kZWZhdWx0ID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uIChfU2NlbmVEZWZlcnJlZEJhc2UpIHtcbiAgX2luaGVyaXRzKF9kZWZhdWx0LCBfU2NlbmVEZWZlcnJlZEJhc2UpO1xuXG4gIGZ1bmN0aW9uIF9kZWZhdWx0KHBsYXllciwgZGF0YSkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX2dldFByb3RvdHlwZU9mKF9kZWZhdWx0KS5jYWxsKHRoaXMsIHBsYXllciwgZGF0YSkpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbe1xuICAgIGtleTogXCJsb2FkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmxvZyhMT0csICdsb2FkKCknKTtcbiAgICAgIHRoaXMuZ2F0aGVyRGF0YSh0aGlzLnJlbmRlci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2F0aGVyRGF0YVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnYXRoZXJEYXRhKHJlc29sdmUpIHtcbiAgICAgIERFQlVHICYmIGNvbnNvbGUubG9nKExPRywgJ2dhdGhlckRhdGEoKScpO1xuICAgICAgdGhpcy5kYXRhLmh0bWwgPSB0aGlzLmdldE1vam9GcmFnbWVudChcIm1vam8tLW1hcmt1cC0tXCIuY29uY2F0KHRoaXMuaWQpLCAndGV4dC9tb2pvLW1hcmt1cCcpO1xuICAgICAgdGhpcy5kYXRhLnNjcmlwdCA9IHRoaXMuZ2V0TW9qb0ZyYWdtZW50KFwibW9qby0tc2NyaXB0LS1cIi5jb25jYXQodGhpcy5pZCksICd0ZXh0L21vam8tc2NyaXB0Jyk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImdldE1vam9GcmFnbWVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNb2pvRnJhZ21lbnQoaWQsIHR5cGUpIHtcbiAgICAgIHZhciBzY3JpcHRUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1wiLmNvbmNhdChpZCwgXCJbdHlwZT1cXFwiXCIpLmNvbmNhdCh0eXBlLCBcIlxcXCJdXCIpKTtcbiAgICAgIHJldHVybiBzY3JpcHRUYWcgPyBzY3JpcHRUYWcuaW5uZXJIVE1MIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBfZGVmYXVsdDtcbn0oU2NlbmVEZWZlcnJlZEJhc2UpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmIChjYWxsICYmIChfdHlwZW9mKGNhbGwpID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpKSB7IHJldHVybiBjYWxsOyB9IHJldHVybiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpOyB9XG5cbmZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IF9nZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5nZXRQcm90b3R5cGVPZiA6IGZ1bmN0aW9uIF9nZXRQcm90b3R5cGVPZihvKSB7IHJldHVybiBvLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobyk7IH07IHJldHVybiBfZ2V0UHJvdG90eXBlT2Yobyk7IH1cblxuZnVuY3Rpb24gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKSB7IGlmIChzZWxmID09PSB2b2lkIDApIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvblwiKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBfc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpOyB9XG5cbmZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IF9zZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiBfc2V0UHJvdG90eXBlT2YobywgcCkgeyBvLl9fcHJvdG9fXyA9IHA7IHJldHVybiBvOyB9OyByZXR1cm4gX3NldFByb3RvdHlwZU9mKG8sIHApOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCBTY2VuZSBmcm9tICcuL1NjZW5lJztcbmltcG9ydCB7IEZ1c2lvbkhlbHBlciB9IGZyb20gJy4vRnVzaW9uSGVscGVyJztcbmltcG9ydCBDb25zdCBmcm9tICcuLi9Db25zdCc7XG52YXIgTE9HID0gJ1sgU2NlbmVJZnJhbWUgXSc7XG5cbnZhciBfZGVmYXVsdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoX1NjZW5lKSB7XG4gIF9pbmhlcml0cyhfZGVmYXVsdCwgX1NjZW5lKTtcblxuICBmdW5jdGlvbiBfZGVmYXVsdChwbGF5ZXIsIGRhdGEpIHtcbiAgICB2YXIgX3RoaXM7XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2RlZmF1bHQpO1xuXG4gICAgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfZ2V0UHJvdG90eXBlT2YoX2RlZmF1bHQpLmNhbGwodGhpcywgcGxheWVyLCBkYXRhKSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIFwiaWZyYW1lXCIsIHZvaWQgMCk7XG5cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcImxvYWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZCgpIHtcbiAgICAgIGNvbnNvbGUubG9nKExPRywgJ2xvYWQoKScpO1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgIC8vIENyZWF0ZSBNYXJrdXBcbiAgICAgIHRoaXMuZWxlbWVudCA9IEZ1c2lvbkhlbHBlci5hcHBlbmRIdG1sKHRoaXMudmlld3BvcnQsIFwiPGRpdiBjbGFzcz1cXFwiZnVzaW9uLS1zY2VuZSBmdXNpb24tLXNjZW5lLS1pZnJhbWUgc2NlbmUtXCIuY29uY2F0KHRoaXMuaWQsIFwiXFxcIj48L2Rpdj5cIikpO1xuICAgICAgdGhpcy5pZnJhbWUgPSBGdXNpb25IZWxwZXIuYXBwZW5kSHRtbCh0aGlzLmVsZW1lbnQsIFwiPGlmcmFtZSBjbGFzcz1cXFwiZnVzaW9uLS1pZnJhbWVcXFwiIHNyYz1cXFwiXCIuY29uY2F0KHRoaXMuZGF0YS5wYXRoLCBcIlxcXCIgZnJhbWVib3JkZXI9XFxcIjBcXFwiIGFsbG93VHJhbnNwYXJlbmN5PVxcXCJ0cnVlXFxcIj48L2lmcmFtZT5cIikpO1xuICAgICAgRnVzaW9uSGVscGVyLmFwcGVuZEh0bWwodGhpcy5lbGVtZW50LCB0aGlzLmRhdGEuaHRtbCk7IC8vIElmcmFtZSBTaXplXG5cbiAgICAgIHRoaXMuaWZyYW1lLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgdGhpcy5pZnJhbWUuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnOyAvLyBQcm9wYWdhdGUgcHJlcmVhZHlcblxuICAgICAgdGhpcy5lbWl0KENvbnN0LlNDRU5FX1BSRV9SRUFEWSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufShTY2VuZSk7XG5cbmV4cG9ydCB7IF9kZWZhdWx0IGFzIGRlZmF1bHQgfTsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbmltcG9ydCB7IEZ1c2lvbkhlbHBlciB9IGZyb20gJy4vRnVzaW9uSGVscGVyJztcbmltcG9ydCBTY2VuZURlZmF1bHQgZnJvbSAnLi9TY2VuZURlZmF1bHQnO1xuaW1wb3J0IFNjZW5lRmxhdCBmcm9tICcuL1NjZW5lRmxhdCc7XG5pbXBvcnQgU2NlbmVFbWJlZGRlZCBmcm9tICcuL1NjZW5lRW1iZWRkZWQnO1xuaW1wb3J0IFNjZW5lSWZyYW1lIGZyb20gJy4vU2NlbmVJZnJhbWUnO1xuaW1wb3J0IENvbnN0IGZyb20gJy4uL0NvbnN0JztcbnZhciBMT0cgPSAnWyBGdXNpb25QbGF5ZXIgXSc7XG52YXIgREVCVUcgPSB0cnVlO1xuLyoqXG4gKiBGdXNpb25QbGF5ZXIgQ2xhc3NcbiAqL1xuXG52YXIgX2RlZmF1bHQgPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBfZGVmYXVsdChvcHRpb25zKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBfZGVmYXVsdCk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0c1wiLCB7XG4gICAgICBvdmVyZmxvd1g6ICdoaWRkZW4nLFxuICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJ1xuICAgIH0pO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uc1wiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwid3JhcHBlclwiLCB2b2lkIDApO1xuXG4gICAgX2RlZmluZVByb3BlcnR5KHRoaXMsIFwidmlld3BvcnRcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjZW5lc1wiLCBbXSk7XG5cbiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgXCJjdXJyZW50U2NlbmVcIiwgdm9pZCAwKTtcblxuICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxhc3RTY2VuZVwiLCB2b2lkIDApO1xuXG4gICAgd2luZG93LmZ1c2lvblBsYXllciA9IHdpbmRvdy5mdXNpb25QbGF5ZXIgPyB3aW5kb3cuZnVzaW9uUGxheWVyIDoge307XG4gICAgd2luZG93LmZ1c2lvblBsYXllcltvcHRpb25zLmlkXSA9IHRoaXM7XG4gICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICB0aGlzLmlkID0gb3B0aW9ucy5pZDtcbiAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChvcHRpb25zLmlkKTtcbiAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgnZnVzaW9uLS1wbGF5ZXInKTtcbiAgICB0aGlzLmNyZWF0ZU1hcmt1cCgpO1xuICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLndyYXBwZXIucXVlcnlTZWxlY3RvcignLmZ1c2lvbi0tdmlld3BvcnQnKTsgLy8gVmlld3BvcnQgaXMgbm93IGFsd2F5cyAxMDAlIG9mIHBsYXllclxuICAgIC8vIHRoaXMudmlld3BvcnQuc3R5bGUud2lkdGggPSAodHlwZW9mIHRoaXMub3B0aW9ucy53aWR0aCA9PSAnc3RyaW5nJykgPyB0aGlzLm9wdGlvbnMud2lkdGggOiBgJHt0aGlzLm9wdGlvbnMud2lkdGh9cHhgO1xuICAgIC8vIHRoaXMudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gKHR5cGVvZiB0aGlzLm9wdGlvbnMuaGVpZ2h0ID09ICdzdHJpbmcnKSA/IHRoaXMub3B0aW9ucy5oZWlnaHQgOiBgJHt0aGlzLm9wdGlvbnMuaGVpZ2h0fXB4YDtcblxuICAgIHRoaXMudmlld3BvcnQuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjsgLy8gQ3JlYXRlIHNjZW5lIG9iamVjdHNcblxuICAgIHRoaXMub3B0aW9ucy5zY2VuZXMuZm9yRWFjaChmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgIHNjZW5lLndpZHRoID0gc2NlbmUud2lkdGggfHwgX3RoaXMub3B0aW9ucy53aWR0aDtcbiAgICAgIHNjZW5lLmhlaWdodCA9IHNjZW5lLmhlaWdodCB8fCBfdGhpcy5vcHRpb25zLmhlaWdodDtcblxuICAgICAgc3dpdGNoIChzY2VuZS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2ZsYXQnOlxuICAgICAgICAgIF90aGlzLnNjZW5lcy5wdXNoKG5ldyBTY2VuZUZsYXQoX3RoaXMsIHNjZW5lKSk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdlbWJlZGRlZCc6XG4gICAgICAgICAgX3RoaXMuc2NlbmVzLnB1c2gobmV3IFNjZW5lRW1iZWRkZWQoX3RoaXMsIHNjZW5lKSk7XG5cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgICAgIF90aGlzLnNjZW5lcy5wdXNoKG5ldyBTY2VuZUlmcmFtZShfdGhpcywgc2NlbmUpKTtcblxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgX3RoaXMuc2NlbmVzLnB1c2gobmV3IFNjZW5lRGVmYXVsdChfdGhpcywgc2NlbmUpKTtcblxuICAgICAgfVxuICAgIH0pOyAvLyB0aGlzLmxvYWRTY2VuZSgnc2NlbmUxJyk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoX2RlZmF1bHQsIFt7XG4gICAga2V5OiBcImNyZWF0ZU1hcmt1cFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVNYXJrdXAoKSB7XG4gICAgICAvLyBXaXRoIHR5cGUgJ2ZsYXQnIHdlIG1pZ2h0IGhhdmUgY3JlYXRlZCB0aGUgdmlld3BvcnQgbWFudWFsbHlcbiAgICAgIGlmICh0aGlzLndyYXBwZXIucXVlcnlTZWxlY3RvcignLmZ1c2lvbi0tdmlld3BvcnQnKSkgcmV0dXJuO1xuICAgICAgRnVzaW9uSGVscGVyLmFwcGVuZEh0bWwodGhpcy53cmFwcGVyLCAnPGRpdiBjbGFzcz1cImZ1c2lvbi0tdmlld3BvcnRcIj48L2Rpdj4nKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZ2V0U2NlbmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2NlbmUoaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnNjZW5lcy5maW5kKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtLmlkID09PSBpZDtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJsb2FkU2NlbmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFNjZW5lKGlkKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgLy8gICBjb25zdCBzY2VuZSA9IHRoaXMuZ2V0U2NlbmUoaWQpO1xuICAgICAgLy8gICBpZiAoIXNjZW5lKSB7XG4gICAgICAvLyAgICAgY29uc29sZS5lcnJvcihMT0csICdTY2VuZSBub3QgZm91bmQ6JywgaWQpO1xuICAgICAgLy8gICAgIHJldHVybjtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gICBzY2VuZS5sb2FkKCk7XG4gICAgICAvLyB9XG4gICAgICAvLyAvKipcbiAgICAgIC8vICAqIE9wZW4gc2NlbmVcbiAgICAgIC8vICAqIE9wZW5zIGEgc2NlbmUgYW5kIGxvYWRzIGl0IGZpcnN0IGlmIG5lZWRlZFxuICAgICAgLy8gICogQHBhcmFtIHtzdHJpbmd9IGlkIFNjZW5lIGlkIFxuICAgICAgLy8gICovXG4gICAgICAvLyBvcGVuU2NlbmUoaWQpIHtcbiAgICAgIERFQlVHICYmIGNvbnNvbGUubG9nKExPRywgJ29wZW5TY2VuZSgpJywgXCJ7XCIuY29uY2F0KGlkLCBcIn1cIikpO1xuICAgICAgdmFyIHNjZW5lID0gdGhpcy5nZXRTY2VuZShpZCk7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmxvZyhMT0csICdvcGVuU2NlbmUoKScsIFwie1wiLmNvbmNhdChpZCwgXCJ9XCIpLCBcInN0YXRlOiBcIi5jb25jYXQoc2NlbmUuc3RhdGUpKTsgLy8gQmFpbFxuXG4gICAgICBpZiAoc2NlbmUgPT09IHRoaXMuY3VycmVudFNjZW5lKSByZXR1cm47IC8vIFNjZW5lIGlzIGxvYWRlZCBhbmQgcmVhZHlcblxuICAgICAgaWYgKHNjZW5lICYmIHNjZW5lLnN0YXRlID09PSAncmVhZHknKSB7XG4gICAgICAgIHRoaXMubGFzdFNjZW5lID0gdGhpcy5jdXJyZW50U2NlbmU7XG4gICAgICAgIHRoaXMuY3VycmVudFNjZW5lID0gc2NlbmU7IC8vIEZhZGUgb3V0IGxhc3Qgc2NlbmVcblxuICAgICAgICB0aGlzLmxhc3RTY2VuZSAmJiBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczIubGFzdFNjZW5lLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgICB9LCAxMDApOyAvLyBCcmluZyB0byBmcm9udFxuXG4gICAgICAgIHNjZW5lLmVsZW1lbnQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChzY2VuZS5lbGVtZW50KTsgLy8gRmFkZSBpblxuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5jdXJyZW50U2NlbmUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICAgIH0sIDEpO1xuICAgICAgfSAvLyBTY2VuZSBpcyBub3QgcmVhZHkgeWV0XG4gICAgICBlbHNlIGlmIChzY2VuZSkge1xuICAgICAgICAgIC8vIHNjZW5lLm9uKENvbnN0LlNDRU5FX1JFQURZLCB0aGlzLm9wZW5TY2VuZS5iaW5kKHRoaXMsIGlkKSk7XG4gICAgICAgICAgc2NlbmUub24oQ29uc3QuU0NFTkVfUkVBRFksIHRoaXMubG9hZFNjZW5lLmJpbmQodGhpcywgaWQpKTsgLy8gdGhpcy5sb2FkU2NlbmUoaWQpO1xuXG4gICAgICAgICAgc2NlbmUubG9hZCgpO1xuICAgICAgICB9IC8vIFNjZW5lIG5vdCBmb3VuZFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoTE9HLCAnU2NlbmUgbm90IGZvdW5kOicsIGlkKTtcbiAgICAgICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIF9kZWZhdWx0O1xufSgpO1xuXG5leHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07IiwiaW1wb3J0IEZ1c2lvbiBmcm9tICcuL2Z1c2lvbi9GdXNpb24nO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL2Z1c2lvbi9jb3JlL1BsYXllcic7XG5pbXBvcnQgQ29uc3QgZnJvbSAnLi9mdXNpb24vQ29uc3QnO1xuaW1wb3J0ICcuLi9zdHlsZS9mdXNpb24uc2Nzcyc7XG5cbnZhciB2ZXJzaW9uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJykudmVyc2lvbjtcblxuY29uc29sZS5sb2coJ1sgRnVzaW9uIF0nLCAnVkVSU0lPTicsIHZlcnNpb24pOyAvLyBHbG9iYWwgRnVzaW9uIGluc3RhbmNlXG5cbndpbmRvdy5mdXNpb24gPSBuZXcgRnVzaW9uKCk7IC8vIFVzZSBGdXNpb24gaW5zdGFuY2UgYXMgbmFtZXNwYWNlIGZvciBhbGwgY2xhc3Nlc1xuXG5PYmplY3QuYXNzaWduKHdpbmRvdy5mdXNpb24sIHtcbiAgXCJjb25zdFwiOiBDb25zdCxcbiAgUGxheWVyOiBQbGF5ZXJcbn0pOyJdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ3ZEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ2pFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNqRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FDdkpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n')}]);